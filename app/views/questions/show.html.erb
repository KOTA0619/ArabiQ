<div class="container" >
    <div class="row mt-5 mb-5">
        <div class="col-sm-4">
            <div class="w-50">
              <%= render 'layouts/prof_icon', user: @question.user %>
            </div>
        </div>
        <div class="col-sm-8">
            <h1><%= @question.title %></h1>
            <p><%= @question.content %></p>
            
            <% if current_user == @question.user %>
              <div class="btn btn-danger float-right ml-2"><%= link_to '削除', @question, method: :delete, data: { confirm: '本当に削除しますか?' }, class: 'text-white' %></div>
              <div class="btn btn-success float-right ml-2"><%= link_to '編集', edit_question_path, class: 'text-white' %></div>
            <% end %>
            <div class="btn btn-primary float-right"><%= link_to '返信', new_question_answer_path(@question.id), class: 'text-white' %></div>
        </div>
    </div>

    <div class="border-top border-bottom">
        <h2 class="text-center m-4">返信一覧</h2>
    </div>
    <div>
      <% @answers = @question.answers.all %>
        <% @answers.each do |answer| %>
          <div class="row m-3 border-bottom">
              <div class="col-sm-4 w-50">
                  <div class="float-right">
                    <%= render 'layouts/prof_icon', user: answer.user %>
                  </div>
              </div>
              <div class="col-sm-8">
                  <p><%= answer.content %></p>
                  <% if current_user == answer.user %>
                    <div class="btn btn-success float-right"><%= link_to '編集', edit_question_answer_path(@question.id), class: 'text-white' %></div>
                    <div>
                      <%= form_with(url: question_answer_path(@question.id), local:true, method: :delete) do |f| %>
                        <%= hidden_field_tag :answer_id, answer.id %>
                        <%= f.submit '削除', class: 'btn btn-danger float-right mr-3' %>
                      <% end %>
                    </div>
                  <% end %>
              </div>
          </div>
        <% end %>
    </div>
</div>