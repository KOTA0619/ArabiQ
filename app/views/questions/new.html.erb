<div class="container" >
    <h1 class="mt-5 text-center">質問作成</h1>

    <%= form_with(model: @question, local: true) do |f| %>

    <div class="row mt-5">
        <div class="col-sm-6">
      
            <%= render 'layouts/error_message', model: f.object %>
        
            <div class="form-group">
              <%= f.label :title, 'タイトル' %> 
              <%= f.text_field :title, class: 'form-control' %>
            </div>
        
            <div class="form-group">
                <%= f.label :content, '本文' %>
                <%= f.text_area :content, class: 'form-control' %>
            </div>
          
          </div>
            
          <div class="col-sm-6">  
            <div class="form-group">
              <%= f.label :image, '画像' %>
              <%= f.file_field :image, class: 'form-control', id: :img%>
            </div>
            
            <script type="text/javascript">
            $(function() {
              function readURL(input){
                if (input.files && input.files[0]) {
                  var reader = new FileReader();
                  reader.onload = function (e) {
                    $('#image_prev').attr('src', e.target.result);
                  }
                  reader.readAsDataURL(input.files[0]);
                }
              }
              $("#img").change(function(){
                readURL(this);
              });
            });
            </script>
            
            <div>
              <% if @question.image? %>
                <%= image_tag @question.image.url, id: :image_prev %>
              <% end %>
            </div>
          </div>
        </div>
    </div>
    <div class="text-center">
      <%= f.submit '投稿', class: 'btn btn-primary btn-lg mb-3'%>
    </div>
    <% end %>
</div>